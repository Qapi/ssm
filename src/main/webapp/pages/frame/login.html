<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
	<head th:include="fragment/import :: header"></head>
	<title>登录</title>
	
	<style>
		.cube {
		    -webkit-transform-style: preserve-3d;
		    transform-style: preserve-3d;
		    -webkit-animation: rotate 2s infinite;
		    animation: rotate 2s infinite;
		}
		/* @-webkit-keyframes rotate {
		    from {
		        -moz-transform:rotate(0);
				-webkit-transform:rotate(0);
				-o-transform:rotate(0);
				transform:rotate(0); 
				filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=1);
		    }
		    to {
		        -moz-transform:rotate(90deg);
				-webkit-transform:rotate(90deg);
				-o-transform:rotate(90deg);
				transform:rotate(90deg); 
				filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=1);
		    }
		}
		@-moz-keyframes rotate {
		    from {
		        -moz-transform:rotate(0);
				-webkit-transform:rotate(0);
				-o-transform:rotate(0);
				transform:rotate(0); 
				filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=1);
		    }
		    to {
		        -moz-transform:rotate(90deg);
				-webkit-transform:rotate(90deg);
				-o-transform:rotate(90deg);
				transform:rotate(90deg); 
				filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=1);
		    }
		} */
		@keyframes rotate {
		    0% {
			    -webkit-transform: rotateY(0deg);
			    }
			100% {
			    -webkit-transform: rotateY(360deg);
			    }
		}
	</style>
	
	<script type="text/javascript" th:src="@{/assets/js/jquery.cookie.js}"></script>
	<script type="text/javascript" th:inline="javascript">
		/*<![CDATA[*/
			function update(obj){
				console.info(obj.src);
				obj.src = [[@{/captcha}]] + "?" + Math.random();
			}
		
			$(function(){
				//回显cookie中的值
				if ($.cookie("rember") == "true") {
					$("#rember").attr("checked", true);
					$("#j_username").textbox("setValue",$.cookie("userName"));
					$("#j_password").textbox("setValue",$.cookie("passWord"));
				}
				
				$("#login").click(function(){
					var fm = $("form");
					if(fm.form("validate")){
						//将用户信息保存到cookie中
						if (document.getElementById("rember").checked == true) {
							var userName = $("#j_username").textbox("getText");
							var passWord = $("#j_password").textbox("getText");
							$.cookie("rember", "true", {expires : 7}); // 存储一个带7天期限的 cookie
							$.cookie("userName", userName, {expires : 7}); // 存储一个带7天期限的 cookie
							$.cookie("passWord", passWord, {expires : 7}); // 存储一个带7天期限的 cookie
						} else {
							$.cookie("rember", "false", {expires : -1});
							$.cookie("userName", '', {expires : -1});
							$.cookie("passWord", '', {expires : -1});
						}

						fm.submit();
					}
				});
				
				draw11("can");
			});
			
			
			
			
			function create5Star(context) {
	            var n = 0;
	            var dx = 100;
	            var dy = 0;

	            //星星的大小
	            var s = 20;
	            
	            //创建路径
	            context.beginPath();
	            
	            //填充颜色
	            var my_gradient=context.createLinearGradient(0,0,170,0);
	            my_gradient.addColorStop(1,"rgba(255, 255, 255, 0.51)");
	            context.fillStyle = my_gradient;
	            
	            //绘制路径
	            var x = Math.sin(0);
	            var y = Math.cos(0);
	            var dig = Math.PI / 5 * 4;
	            for (var i = 0; i < 5; i++) {
	                var x = Math.sin(i * dig);
	                var y = Math.cos(i * dig);
	                context.lineTo(dx + x * s, dy + y * s);

	            }
	            
	            context.closePath();
	        }

	        function draw11(id) {
	            var canvas = document.getElementById(id);
	            if (canvas == null){
	                return false;
	            }
	            
	            var context = canvas.getContext("2d");

	            //设置阴影
	            context.shadowOffsetX = 3;
	            context.shadowOffsetY = 3;
	            context.shadowColor = '#FFFFFF';
	            context.shadowBlur =5;
	            
	            //图形绘制
	            context.translate(0, 50);
                create5Star(context);
                context.fill();
	        }
		/*]]>*/
	</script>
	
	<body class="lrfBody">
		<canvas id="can" class="cube"></canvas>
		<div class="lrfDiv">
			<div class="container">
				<form th:action="@{/authentication}" method="post">
					<input type="hidden" name="type" value="admin" />
					<div style="padding:5px 10px">
						<div>用户名:</div>
						<input type="text" class="easyui-textbox" id="j_username" name="j_username" style="width:100%" data-options="height:45,required:true,validateOnCreate:false,iconCls:'icon-man',iconAlign:'left',iconWidth:40"/>
					</div>
					<div style="padding:5px 10px">
						<div>密码:</div>
						<input type="password" class="easyui-textbox" id="j_password" name="j_password" style="width:100%" data-options="height:45,required:true,validateOnCreate:false,iconCls:'icon-lock',iconAlign:'left',iconWidth:40"/>
					</div>
					<div style="padding:5px 10px">
						<div>验证码:</div>
						<input type="text" class="easyui-textbox" name="captcha" data-options="width:150,height:40,required:true,validateOnCreate:false"/>
						<img onclick="update(this)" class="captcha" alt="captcha" title="点击更换" th:src="@{/captcha}"/>
					</div>
					<div style="padding:5px 12px;">
						<input id="rember" type="checkbox" style="vertical-align: middle;" /> 
						<span>记住我</span>
					</div>
					<div style="padding:5px 10px;text-align:center">
						<a id="login" class="easyui-linkbutton c8" data-options="fit:true">登 录</a>
						<span class="errorMsg" th:text="${msg}"></span>
					</div>
				</form>
			</div>
		</div>
	</body>
</html>
